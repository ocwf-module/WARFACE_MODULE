# Инструкция по созданию файла \[objectives.xml\] и работе с ним на уровне для Warface

Файл \[objectives.xml\] содержит цели для использования их на игровом уровне. В большинстве своём это тексты, всплывающие на экране, после выполнения определённых действий. Данный файл работает в связке с сущностью \[MissionObjective\], которая и является триггером для данных всплывающих сообщений. Ниже мы разберём, как правильно его создать и как потом с ним работать.

## Создание файла \[objectives.xml\]

Данный файл должен находиться по тому же пути, что и файл \[level.pak\] (для редактора \[\*.cry\]). Создавайте текстовый файл и называйте его \[objectives.xml\]. Далее открывайте его любым текстовым редактором. Я бы посоветовал скачать программу \[Notepad++\] и редактировать с помощью неё, так как она является более удобной в этом плане.

Данный файл имеет следующий общий вид:

```xml
<MissionObjectives>
	<Objective id="" name="" description="" type="" team="">
		<Activate message="" />
		<Complete message="" />
		<Failed message="" />
	</Objective>
</MissionObjectives>
```

Разберём каждую ветку и переменную по отдельности:

### Ветка \[Objective\]:

```id``` - уникальный идентификатор цели, который придумывается вами лично, именно эта переменная задаётся в сущность \[MissionObjective\] для идентификации цели. ID заменяет оригинальную механику, так как в оригинальном CryEngine нужно менять название ветки (например: Objective_1, Objective_2, Objective_3 и т.д.);

```name``` - название цели, пишите туда что хотите, ведь это значение нужно только разработчикам;

```description``` - описание цели, пишите туда что хотите, ведь это значение нужно только разработчикам;

```type``` - тип цели, все типы, как я понял, прописываются в файле \[/libs/config/feedbackevents.xml\], но как именно это работает, мне неизвестно, но тип нужно указывать обязательно, поэтому нужно разбираться в каждом отдельном случае;

```team``` - команда, которой высветиться сообщение ("att" - команда атаки; "def" - команда защиты; "tan" - команда Warface; "black" - команда Blackwood; "" - пустое значение означает, что сообщение высветиться всем;);

#### Ветки \[Activate\], \[Complete\], \[Failed\]:

Какая из веток будет выполняться, зависит от логики, которую вы задали в FlowGraph на этапе создания уровня, так как у сущности \[MissionObjective\] есть три входа: \[Activate\], \[Complete\] и \[Failed\], в какой из них передадут значение \[True\], та ветка файла и будет выполняться.

```message``` - текст или ссылка на локализацию, который отобразится при активации;

## Работа с сущностью \[MissionObjective\]

Теперь нам нужно разобрать, как вообще будут активироваться данные цели. Для этого зайдите в редактор и откройте свой уровень, потом в меню \[RollupBar\] во вкладке \[Objects\] --> \[Entity\] нужно найти сущность \[MissionObjective\] в папке \[Others/\]. Ставите её на карту и в настройках сущности (скриншот №1) в значение \[MissionID\] пропишите следующее: ```MissionObjectives.*``` (вместо \* пишите id цели, которая есть у вас в файле \[objectives.xml\]). Потом нажимаете по сущности правой кнопкой мыши, затем нажимаете \[Create Flow Graph\], проверьте, выделена ли у вас эта сущность, и в поле FlowGraph нажмите правой кнопкой мыши и затем выберете \[Add Selected Entity\]. Теперь вы можете сделать скрипт, который будет активировать данную сущность. Пример скрипта активации цели при старте раунда вы можете увидеть на скриншоте №2. 

![image](https://github.com/user-attachments/assets/7f1606b5-a5b8-4020-94aa-fff04d8b9ece "Cкриншот №1")
![image](https://github.com/user-attachments/assets/9d56571c-2a3e-4a2b-974d-ac3452f41a95 "Cкриншот №2")

## Итог

Вы научились создавать файл \[objectives.xml\] и работать с сущностью \[MissionObjective\], благодаря этому вы можете добавлять свои цели на уровень и редактировать существующие. Если у вас есть какие-то дополнения, то можете написать в нашу беседу канала, и мы дополним инструкцию.
